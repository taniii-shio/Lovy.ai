# 機能要件仕様

## 1. 診断機能

### 1.1 入力仕様

| 項目       | 詳細               | 形式                             |
| ---------- | ------------------ | -------------------------------- |
| MBTI       | 4 文字の性格タイプ | E/I + N/S + T/F + J/P (例: ENFJ) |
| ラブタイプ | 4 文字の恋愛タイプ | L/F + C/A + R/P + O/E (例: FARE) |

### 1.2 診断アルゴリズム（5 種類）（→ ドメのアルゴリズム fix 後反映）

#### 1.2.1 魅力度診断（Attractiveness）

- **出力形式**: 0-100 の総合スコア + 説明テキスト
- **アルゴリズム**: 独自の重み付けロジック
- **要素**: 社交性、共感力、魅力度、バランス感覚

#### 1.2.2 性格軸分析（Personality Axis）

- **出力形式**: 上位 3 つの性格特性 + 説明テキスト
- **アルゴリズム**: 256 パターンごとの事前定義テンプレート
- **要素**: 11 軸の性格ベクトルから上位 3 つを抽出

#### 1.2.3 相性ベスト 3

- **出力形式**: 256 タイプ中の TOP 3 + 相性スコア（%）
- **アルゴリズム**:
  - MBTI 軸の相性マトリクス
  - ラブタイプ軸の補完性評価
  - 総合スコアリング
- **要素**: コミュニケーションスタイル、価値観、愛情表現の相性

#### 1.2.4 愛の言語優先順位（Love Languages）

- **出力形式**: 5 つの愛情表現言語の順位 + スコア + 説明
- **5 つの愛情表現**:
  1. 肯定的な言葉（Words of Affirmation）
  2. 質の高い時間（Quality Time）
  3. 贈り物（Receiving Gifts）
  4. 奉仕行為（Acts of Service）
  5. 身体的接触（Physical Touch）
- **アルゴリズム**: MBTI とラブタイプの組み合わせから優先順位を算出

#### 1.2.5 人生配分（Life Allocation）

- **出力形式**: 各カテゴリのパーセンテージ + 説明テキスト
- **項目**:
  - 恋愛・パートナーシップ
  - 仕事・キャリア
  - 友人・社交
  - 趣味・自己成長
  - 家族
- **アルゴリズム**: MBTI+ラブタイプから理想的な時間配分を計算

## 2. 結果サマリ画像エクスポート

### 2.1 画像仕様

- **形式**: PNG (推奨) / JPEG
- **サイズ**: 1200x630px (SNS OG Image 標準)
- **デザイン要素**:
  - ユーザーのタイプ名（MBTI + ラブタイプ）
  - 魅力度スコアのビジュアル表示
  - 相性ベスト 3 のアイコン表示
  - ブランドロゴ

### 2.2 生成方法

- フロントエンド: Canvas API / html2canvas（優先）
- バックエンド: Puppeteer / Canvas (Node.js)（補助）

### 2.3 ダウンロード機能

- ユーザーは生成された画像を直接ダウンロード可能
- ファイル名: `lovy-ai-{mbti}-{loveType}.png`

## 3. SNS 共有機能（Nice to Have）

### 3.1 対応プラットフォーム

- Twitter (X)
- Instagram (ストーリー想定)
- LINE
- Facebook

### 3.2 共有内容

- 診断結果のサマリテキスト
- 結果画像（OGP 対応）
- アプリへの誘導 URL

### 3.3 OGP 設定

- タイトル: 「私の恋愛タイプは[タイプ名]でした！」
- 説明文: 魅力度スコア + 性格サマリ
- 画像: 結果サマリ画像

### 3.4 実装優先度

- **初期リリース**: Nice to Have（時間があれば実装）
- **将来的な拡張**: バイラル拡散のための重要機能

## 4. ユーザーフロー

```
1. ランディングページ
   ↓
2. MBTI選択画面（16パターンから選択）
   ↓
3. Love Type 16選択画面（16パターンから選択）
   ↓
4. 診断結果表示
   ├→ 詳細表示（5つの診断項目）
   ├→ 画像ダウンロードボタン（必須）
   └→ SNS共有ボタン（Nice to Have）
   ↓
5. 再診断 or 他の人の診断
```

## 5. 非機能要件

### 5.1 パフォーマンス

- 診断結果の表示: 2 秒以内
- 画像生成: 3 秒以内

### 5.2 スケーラビリティ

- 同時アクセス: 1000 リクエスト/秒を想定

### 5.3 データ保持

- 診断結果の保存: 任意（後のフェーズで検討）
- 匿名診断を基本とする
